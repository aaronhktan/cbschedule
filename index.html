<!DOCTYPE html>
 <html>
 	<head>
 		<meta charset="utf-8">
 		<meta name="description" content="Change your settings for the CB Schedule pebble app."/>
		<meta name="viewport" content="width=device-width, initial-scale=1"/>
 		<title>CB Schedule Manager</title>
 		<link rel="icon" href="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI4IiBoZWlnaHQ9IjgiIHZpZXdCb3g9IjAgMCA4IDgiPgogIDxwYXRoIGQ9Ik01LjUgMGMtMS4zOCAwLTIuNSAxLjEyLTIuNSAyLjUgMCAuMTYgMCAuMzIuMDMuNDdsLTMuMDMgMy4wM3YyaDN2LTJoMnYtMWwuMDMtLjAzYy4xNS4wMy4zMS4wMy40Ny4wMyAxLjM4IDAgMi41LTEuMTIgMi41LTIuNXMtMS4xMi0yLjUtMi41LTIuNXptLjUgMWMuNTUgMCAxIC40NSAxIDFzLS40NSAxLTEgMS0xLS40NS0xLTEgLjQ1LTEgMS0xeiIgLz4KPC9zdmc+"/>
 		<link href='https://fonts.googleapis.com/css?family=Roboto:300,700,400' rel='stylesheet' type='text/css'>
 		<link href="css/main.css" rel="stylesheet"/>
 		<script>
		function queryPeriods(paramName) {
			url = window.location.search.substring(1);
			if (url.search(paramName) != -1) {
				params = url.split("&");
				for (i=0; i<params.length; i++) {
					param = params[i].split("=");
				        if (param[0] == paramName) {
				        	return param[1];
				        }
				}
			}
			else {
				return "";
			}
			
		};
		</script>
 	</head>
 	<body>
 		<div id="title">
 			<p>CB Schedule Manager</p>
 		</div>
 		<div class="input-title">
 			<strong>Period 1A </strong>
				<br>Course:<br>
					<input id="period-1a-input" type="text" onblur="this.value=removeSpaces(this.value)"/>
					<script>
					var oneainput = queryPeriods("onea");
					document.getElementById('period-1a-input').value= oneainput;
					</script>
				<br>Course Code:<br>
					<input id="period-1a-code-input" type="text" onblur="this.value=removeSpaces(this.value)"/>
					<script>
					var oneacode = queryPeriods("oneacode");
					document.getElementById('period-1a-code-input').value= oneacode;
					</script>
			<br><br> <strong>Period 1B </strong>
				<br>Course:<br>
					<input id="period-1b-input" type="text" onblur="this.value=removeSpaces(this.value);"/>
					<script>
					var onebinput = queryPeriods("oneb");
					document.getElementById('period-1b-input').value= onebinput;
					</script>
				<br>Course Code:<br>
					<input id="period-1b-code-input" type="text" onblur="this.value=removeSpaces(this.value)"/>
					<script>
					var onebcode = queryPeriods("onebcode");
					document.getElementById('period-1b-code-input').value= onebcode;
					</script>
			<br><br> <strong>Period 1C </strong>
				<br>Course:<br>
					<input id="period-1c-input" type="text" onblur="this.value=removeSpaces(this.value);"/>
					<script>
					var onecinput = queryPeriods("onec");
					document.getElementById('period-1c-input').value= onecinput;
					</script>
				<br>Course Code:<br>
					<input id="period-1c-code-input" type="text" onblur="this.value=removeSpaces(this.value)"/>
					<script>
					var oneccode = queryPeriods("oneccode");
					document.getElementById('period-1c-code-input').value= oneccode;
					</script>
			<br><br> <strong>Period 1D </strong>
				<br>Course:<br>
					<input id="period-1d-input" type="text" onblur="this.value=removeSpaces(this.value);"/>
					<script>
					var onedinput = queryPeriods("oned");
					document.getElementById('period-1d-input').value= onedinput;
					</script>
				<br>Course Code:<br>
					<input id="period-1d-code-input" type="text" onblur="this.value=removeSpaces(this.value)"/>
					<script>
					var onedcode = queryPeriods("onedcode");
					document.getElementById('period-1d-code-input').value= onedcode;
					</script>
			<br><br> <strong>Period 2A </strong>
				<br>Course:<br>
					<input id="period-2a-input" type="text" onblur="this.value=removeSpaces(this.value);"/>
					<script>
					var twoainput = queryPeriods("twoa");
					document.getElementById('period-2a-input').value= twoainput;
					</script>
				<br>Course Code:<br>
					<input id="period-2a-code-input" type="text" onblur="this.value=removeSpaces(this.value)"/>
					<script>
					var twoacode = queryPeriods("twoacode");
					document.getElementById('period-1c-code-input').value= oneccode;
					</script>
			<br><br> <strong>Period 2B: </strong>
				<br>Course:<br>
					<input id="period-2b-input" type="text" onblur="this.value=removeSpaces(this.value);"/>
					<script>
					var twobinput = queryPeriods("twob");
					document.getElementById('period-2b-input').value= twobinput;
					</script>
				<br>Course Code:<br>
					<input id="period-2b-code-input" type="text" onblur="this.value=removeSpaces(this.value)"/>
					<script>
					var oneccode = queryPeriods("twobcode");
					document.getElementById('period-2b-code-input').value= twobcode;
					</script>
			<br><br> <strong>Period 2C: </strong>
				<br>Course:<br>
					<input id="period-2c-input" type="text" onblur="this.value=removeSpaces(this.value);"/>
					<script>
					var twocinput = queryPeriods("twoc");
					document.getElementById('period-2c-input').value= twocinput;
					</script>
				<br>Course Code:<br>
					<input id="period-2c-code-input" type="text" onblur="this.value=removeSpaces(this.value)"/>
					<script>
					var twoccode = queryPeriods("twoccode");
					document.getElementById('period-2c-code-input').value= twoccode;
					</script>
			<br><br> <strong>Period 2D: </strong>
				<br>Course: <br>
					<input id="period-2d-input" type="text" onblur="this.value=removeSpaces(this.value);"/>
					<script>
					var twodinput = queryPeriods("twod");
					document.getElementById('period-2d-input').value= twodinput;
					</script>
				<br>Course Code:<br>
					<input id="period-2d-code-input" type="text" onblur="this.value=removeSpaces(this.value)"/>
					<script>
					var oneccode = queryPeriods("twodcode");
					document.getElementById('period-2d-code-input').value= twodcode;
					</script>
			<br><br>
		</div>
 		<div id="savebutton">
			<input id="submit_button" type="button" value="Save">
 		</div>
 		<script>
 		  // Get a handle to the button's HTML element
 		  var submitButton = document.getElementById('submit_button');
 		
 		  // Add a 'click' listener
 		  submitButton.addEventListener('click', function() {
 		    // Get the config data from the UI elements
 		    var onea = document.getElementById('period-1a-input').value;
 		    var oneb = document.getElementById('period-1b-input').value;
 		    var onec = document.getElementById('period-1c-input').value;
 		    var oned = document.getElementById('period-1d-input').value;
 		    var twoa = document.getElementById('period-2a-input').value;
 		    var twob = document.getElementById('period-2b-input').value;
 		    var twoc = document.getElementById('period-2c-input').value;
 		    var twod = document.getElementById('period-2d-input').value;
			var oneacode = document.getElementById('period-1a-code-input').value;
			var onebcode = document.getElementById('period-1b-code-input').value;
			var oneccode = document.getElementById('period-1c-code-input').value;
			var onedcode = document.getElementById('period-1d-code-input').value;
			var twoacode = document.getElementById('period-2a-code-input').value;
			var twobcode = document.getElementById('period-2b-code-input').value;
			var twoccode = document.getElementById('period-2c-code-input').value;
			var twodcode = document.getElementById('period-2d-code-input').value;
			
			
 		    // Make a data object to be sent, coercing value types to integers
 		    var options = {
 		      'onea': onea,
 		      'oneb': oneb,
 		      'onec': onec,
 		      'oned': oned,
 		      'twoa': twoa,
 		      'twob': twob,
 		      'twoc': twoc,
 		      'twod': twod,
			  'oneacode': oneacode,
			  'onebcode': onebcode,
			  'oneccode': oneccode,
			  'onedcode': onedcode,
			  'twoacode': twoacode,
			  'twobcode': twobcode,
			  'twoccode': twoccode,
			  'twodcode': twodcode,
 		    };
 		
 		    // Determine the correct return URL (emulator vs real watch)
 		    function getQueryParam(variable, defaultValue) {
 		      var query = location.search.substring(1);
 		      var vars = query.split('&');
 		      for (var i = 0; i < vars.length; i++) {
 		        var pair = vars[i].split('=');
 		        if (pair[0] === variable) {
 		          return decodeURIComponent(pair[1]);
 		        }
 		      }
 		      return defaultValue || false;
 		    }
 		    var return_to = getQueryParam('return_to', 'pebblejs://close#');
 		
 		    // Encode and send the data when the page closes
 		    document.location = return_to + encodeURIComponent(JSON.stringify(options));
 		  })
 		</script>
 		<script>
		function removeSpaces(string) {
 			s = string;
			s = s.replace(/(^\s*)|(\s*$)/gi,"");
			s = s.replace(/[ ]{2,}/gi," ");
			s = s.replace(/\n /,"\n");
			return s
		}
		</script>
 	</body>
 </html>
